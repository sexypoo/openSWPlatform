<!DOCTYPE html>
<html lang="ko">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ewha Market - Wishlist</title>
<style>
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", Arial, sans-serif;
    color: #222;
  }
  .page { max-width: 1100px; margin: 0 auto; padding: 24px 28px 56px; }

  /* header */
  header { display: flex; align-items: center; gap: 16px; }
  h1 { margin: 0; font-size: 28px; letter-spacing: 2px; color: #2a7a2a; }
  nav { margin-left: auto; }
  nav ul { list-style: none; display: flex; gap: 20px; margin: 0; padding: 0; }
  nav a { display: block; color: #222; text-decoration: none; padding: 8px 6px; }
  nav a.active { text-decoration: underline; }

  .title { text-align: center; font-size: 26px; margin: 28px 0 8px; font-weight: 600; }
  hr { border: 0; border-top: 1px solid #e5e5e5; margin: 12px 0 28px; }

  /* grid */
  .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 28px; }
  @media (max-width: 1000px) { .grid { grid-template-columns: repeat(2, 1fr); } }
  @media (max-width: 640px) { .grid { grid-template-columns: 1fr; } }

  .card {
    display: flex;
    flex-direction: column;
    gap: 10px;
    position: relative;
  }
  .thumb {
    background: #e9e9e9;
    border-radius: 6px;
    width: 100%;
    aspect-ratio: 1 / 1;
    position: relative;
  }

  /* â¤ï¸ í•˜íŠ¸ ë²„íŠ¼ */
  .heart {
    position: absolute;
    bottom: 8px;
    right: 8px;
    font-size: 24px;
    cursor: pointer;
    color: red;
    transition: 0.2s;
  }
  .heart.inactive { color: #aaa; } /* ì°œ í•´ì œ ì‹œ íšŒìƒ‰ */

  .meta { display: flex; justify-content: space-between; align-items: baseline; }
  .name { font-size: 15px; }
  .price { font-size: 14px; color: #555; }
  .card a { display: block; color: inherit; text-decoration: none; }
</style>
</head>
<body>
  <div class="page">
    <header>
      <h1>EWHA MARKET</h1>
      <nav>
        <ul>
          <li><a href="front.html">Home</a></li>
          <li><a class="active" href="product.html">Products</a></li>
          <li><a href="#review">Reviews</a></li>
          <li><a href="#login">ë¡œê·¸ì¸/íšŒì›ê°€ì…</a></li>
        </ul>
      </nav>
    </header>

    <div class="title">Wishlist</div>
    <hr>

    <section class="grid" id="wishlistGrid">
      <!-- ì¹´ë“œë“¤ì´ JSë¡œ ìë™ ìƒì„±ë¨ -->
    </section>
  </div>

<script>
    localStorage.setItem("wishlist", JSON.stringify([1, 2, 3]));
  // ğŸ’¾ ì„ì‹œ ìƒí’ˆ ë°ì´í„° (ì‹¤ì œë¡œëŠ” DBì—ì„œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ë„ ìˆìŒ)
  const products = [
    { id: 1, name: "Product 1", price: 29000 },
    { id: 2, name: "Product 2", price: 18000 },
    { id: 3, name: "Product 3", price: 45000 },
    { id: 4, name: "Product 4", price: 12000 },
    { id: 5, name: "Product 5", price: 63000 },
    { id: 6, name: "Product 6", price: 22000 },
    { id: 7, name: "Product 7", price: 39000 },
    { id: 8, name: "Product 8", price: 49000 },
    { id: 9, name: "Product 9", price: 15000 },
  ];

  // ğŸ’– LocalStorageì— ì €ì¥ëœ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
  let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];

  // ğŸ–¼ï¸ í™”ë©´ì— ìƒí’ˆ ì¹´ë“œ ìƒì„±
  const grid = document.getElementById("wishlistGrid");

  function renderProducts() {
    grid.innerHTML = ""; // ì´ˆê¸°í™”
    const visibleProducts = products.filter(p => wishlist.includes(p.id));

    if (visibleProducts.length === 0) {
      grid.innerHTML = "<p>ìœ„ì‹œë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.</p>";
      return;
    }

    visibleProducts.forEach(p => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <a href="detail.html">
          <div class="thumb" aria-label="ìƒí’ˆ ì´ë¯¸ì§€">
            <span class="heart ${wishlist.includes(p.id) ? "" : "inactive"}" data-id="${p.id}">â¤ï¸</span>
          </div>
          <div class="meta">
            <div class="name">${p.name}</div>
            <div class="price">â‚©${p.price.toLocaleString()}</div>
          </div>
        </a>
      `;
      grid.appendChild(card);
    });

    attachHeartEvents();
  }

  // ğŸ’¡ í•˜íŠ¸ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
  function attachHeartEvents() {
    const hearts = document.querySelectorAll(".heart");
    hearts.forEach(heart => {
      heart.addEventListener("click", e => {
        e.preventDefault(); // ë§í¬ í´ë¦­ ë°©ì§€
        const id = parseInt(heart.dataset.id);

        if (wishlist.includes(id)) {
          // ì´ë¯¸ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ìˆìŒ â†’ ì œê±°
          wishlist = wishlist.filter(x => x !== id);
          heart.classList.add("inactive");
        } else {
          // ì—†ìœ¼ë©´ ì¶”ê°€
          wishlist.push(id);
          heart.classList.remove("inactive");
        }

        // ë³€ê²½ì‚¬í•­ ì €ì¥
        localStorage.setItem("wishlist", JSON.stringify(wishlist));
        renderProducts(); // ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì¦‰ì‹œ ë°˜ì˜
      });
    });
  }

  // ğŸš€ í˜ì´ì§€ ë¡œë“œ ì‹œ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ë Œë”ë§
  renderProducts();
</script>
</body>
</html>
